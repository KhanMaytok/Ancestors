create_khalga_effect = {
	create_character = {
		age = 26
		female = no
		culture = event_target:khalga_lover
		religion = event_target:khalga_lover
		dynasty = none
		attributes = {
			martial = 1
			diplomacy = 5
			stewardship = 2
			intrigue = 12
			learning = 12
		}
		trait = mastermind_theologian
		trait = physician
		trait = fair
		trait = genius
		trait = erudite
		trait = byakugan
		trait = strong
		trait = prevent_marriage
		trait = khalga_blood
		trait = seducer
		trait = khalga_trait
		trait = patient
		trait = proud
		trait = lustful
	}
	new_character = {
		set_character_flag = is_khalga
		set_character_flag = society_join_block
		set_character_flag = originated_from_chinese_court # to prevent to go to China
		set_character_flag = wolf_blood_first_generation
		set_character_flag = immune_bubonic_plague
		add_character_modifier = {
			name = wolf_child
			duration = -1
		}
		save_event_target_as = chr_khalga
		any_courtier = {
			remove_title = title_court_physician
		}
		give_minor_title = title_court_physician
	}
}

create_pentaghast_child_effect = {
	create_character = {
		age = 0
		female = no
		dynasty = 300001
	}
	new_character = {
		set_mother = PREV
		set_character_flag = immune_bubonic_plague
		set_immune_to_pruning = yes
	}
}

create_sakya_child_effect = {
	create_character = {
		age = 0
		female = no
		dynasty = 300000
	}
	new_character = {
		set_mother = PREV
		set_character_flag = immune_bubonic_plague
		set_immune_to_pruning = yes
	}
}

send_mangekyo_duel_result_event_effect = { # Runs via the attacker/combatant_1
	random_list = {
		20 = { #LETHAL for both...
			trigger = {}
			additive_modifier = {
				duel_result_score_decent_trigger = yes #Score: fairly evenly matched
				value = 1
			}
			additive_modifier = { #Both have highest skill
				is_the_best_duelist_trigger = yes
				event_target:combatant_2 = { is_the_best_duelist_trigger = yes }
				value = 1
			}
			additive_modifier = { #Both have the worst skill
				is_the_worst_duelist_trigger = yes
				event_target:combatant_2 = { is_the_worst_duelist_trigger = yes }
				value = 5
			}
			if = {
				limit = { #Both have the best skill
					is_the_best_duelist_trigger = yes
					event_target:combatant_2 = { is_the_best_duelist_trigger = yes }
				}
				set_character_flag = elegant_double_KO
				event_target:combatant_2 = { set_character_flag = elegant_double_KO }
			}
			if = {
				limit = { #Both have the worst skill
					is_the_worst_duelist_trigger = yes
					event_target:combatant_2 = { is_the_worst_duelist_trigger = yes }
				}
				set_character_flag = clumsy_double_KO
				event_target:combatant_2 = { set_character_flag = clumsy_double_KO }
			}
			
			#mostly to deal with Kinslayer effect and tooltips...
			death = { death_reason = death_missing }
			narrative_event = { id = ACS.00053 }
			event_target:combatant_2 = {
				death = { death_reason = death_missing }
				narrative_event = { id = ACS.00053 }
			}
		}

		40 = { #LETHAL for attacker...
			trigger = {}
			additive_modifier = {
				duel_result_score_low_group_trigger = yes #Score: you were outmatched
				value = 5
			}
			additive_modifier = {
				duel_result_score_the_worst_trigger = yes #Score: REALLY outmatched
				value = 10
			}
			additive_modifier = {
				is_bad_duelist_trigger = yes #Skill: bad
				value = 20
			}
			additive_modifier = {
				is_terrible_duelist_trigger = yes #Skill: terrible
				value = 30
			}
			additive_modifier = {
				is_the_worst_duelist_trigger = yes #Skill: the worst
				value = 40
			}
			additive_modifier = {
				has_character_flag = defender_using_poison@event_target:combatant_1 #Defender used poison
				value = 30
			}
			additive_modifier = {
				has_character_flag = poison_can_fail_against@event_target:combatant_1 #Attacker might catch the poison
				value = -25
			}
			additive_modifier = {
				event_target:dueling_weapon_2 = { #Defender is using a *gun*
					has_artifact_flag = gun
				}
				NOT = {
					event_target:dueling_weapon_1 = {
						has_artifact_flag = gun
					}
				}
				value = 30
			}

			death = { death_reason = death_missing }

			event_target:combatant_2 = {
				narrative_event = { id = ACS.00055 }
			}
		}

		40 = { #LETHAL for defender...
			trigger = {}
			additive_modifier = {
				duel_result_score_high_group_trigger = yes #Score: they were outmatched
				value = 5
			}
			additive_modifier = {
				duel_result_score_the_best_trigger = yes #Score: REALLY outmatched
				value = 10
			}
			additive_modifier = {
				event_target:combatant_2 = { is_bad_duelist_trigger = yes } #Their Skill: bad
				value = 20
			}
			additive_modifier = {
				event_target:combatant_2 = { is_terrible_duelist_trigger = yes } #Their Skill: terrible
				value = 30
			}
			additive_modifier = {
				event_target:combatant_2 = { is_the_worst_duelist_trigger = yes } #Their Skill: the worst
				value = 40
			}
			additive_modifier = {
				has_character_flag = attacker_using_poison@event_target:combatant_2 #Attacker used poison
				value = 30
			}
			additive_modifier = {
				has_character_flag = poison_can_fail_against@event_target:combatant_2 #Defender might catch the poison
				value = -25
			}
			additive_modifier = {
				event_target:dueling_weapon_1 = { #Attacker is using a *gun*
					has_artifact_flag = gun
				}
				NOT = {
					event_target:dueling_weapon_2 = {
						has_artifact_flag = gun
					}
				}
				value = 30
			}
			
			event_target:combatant_2 = {
				death = { death_reason = death_missing }
			}

			remove_trait = sharingan
			add_trait = mangekyo_sharingan
			narrative_event = { id = ACS.00054 }
		}
	}
}

add_pentaghast_nomad_buildings_effect = {
	add_building = no_horse_breeder_1
	add_building = no_horse_breeder_2
	add_building = no_horse_breeder_3
	add_building = no_horse_breeder_4
	add_building = no_horse_breeder_5
	add_building = no_horse_breeder_6
	add_building = no_horse_breeder_7
	add_building = no_horse_breeder_8
	add_building = no_riding_contests_1
	add_building = no_riding_contests_2
	add_building = no_riding_contests_3
	add_building = no_riding_contests_4
	add_building = no_riding_contests_5
	add_building = no_riding_contests_6
	add_building = no_riding_contests_7
	add_building = no_riding_contests_8
	add_building = no_airag_producer_1
	add_building = no_airag_producer_2
	add_building = no_airag_producer_3
	add_building = no_airag_producer_4
	add_building = no_airag_producer_5
	add_building = no_airag_producer_6
	add_building = no_airag_producer_7
	add_building = no_airag_producer_8
	add_building = no_cattle_pens_1
	add_building = no_cattle_pens_2
	add_building = no_cattle_pens_3
	add_building = no_cattle_pens_4
	add_building = no_cattle_pens_5
	add_building = no_cattle_pens_6
	add_building = no_cattle_pens_7
	add_building = no_cattle_pens_8
	add_building = no_ox_wagon_1
	add_building = no_ox_wagon_2
	add_building = no_ox_wagon_3
	add_building = no_ox_wagon_4
	add_building = no_ox_wagon_5
	add_building = no_ox_wagon_6
	add_building = no_ox_wagon_7
	add_building = no_ox_wagon_8
	add_building = no_meat_preserver_1
	add_building = no_meat_preserver_2
	add_building = no_meat_preserver_3
	add_building = no_meat_preserver_4
	add_building = no_meat_preserver_5
	add_building = no_meat_preserver_6
	add_building = no_meat_preserver_7
	add_building = no_meat_preserver_8
	add_building = no_sheep_1
	add_building = no_sheep_2
	add_building = no_sheep_3
	add_building = no_sheep_4
	add_building = no_sheep_5
	add_building = no_sheep_6
	add_building = no_sheep_7
	add_building = no_sheep_8
	add_building = no_felt_crafter_1
	add_building = no_felt_crafter_2
	add_building = no_felt_crafter_3
	add_building = no_felt_crafter_4
	add_building = no_felt_crafter_5
	add_building = no_felt_crafter_6
	add_building = no_felt_crafter_7
	add_building = no_felt_crafter_8
	add_building = no_ger_crafter_1
	add_building = no_ger_crafter_2
	add_building = no_ger_crafter_3
	add_building = no_ger_crafter_4
	add_building = no_ger_crafter_5
	add_building = no_ger_crafter_6
	add_building = no_ger_crafter_7
	add_building = no_ger_crafter_8
	add_building = no_wrestling_1
	add_building = no_wrestling_2
	add_building = no_wrestling_3
	add_building = no_wrestling_4
	add_building = no_wrestling_5
	add_building = no_wrestling_6
	add_building = no_wrestling_7
	add_building = no_wrestling_8
	add_building = no_shrine_1
	add_building = no_shrine_2
	add_building = no_shrine_3
	add_building = no_shrine_4
	add_building = no_shrine_5
	add_building = no_shrine_6
	add_building = no_shrine_7
	add_building = no_shrine_8
	add_building = no_hunting_parties_1
	add_building = no_hunting_parties_2
	add_building = no_hunting_parties_3
	add_building = no_hunting_parties_4
	add_building = no_hunting_parties_5
	add_building = no_hunting_parties_6
	add_building = no_hunting_parties_7
	add_building = no_hunting_parties_8
	add_building = no_yam_1
	add_building = no_yam_2
	add_building = no_yam_3
	add_building = no_yam_4
	add_building = no_yam_5
	add_building = no_yam_6
	add_building = no_yam_7
	add_building = no_yam_8
	add_building = no_baghatur_council_1
	add_building = no_baghatur_council_2
	add_building = no_baghatur_council_3
	add_building = no_baghatur_council_4
	add_building = no_baghatur_council_5
	add_building = no_baghatur_council_6
	add_building = no_baghatur_council_7
	add_building = no_baghatur_council_8
	add_building = no_harbor_1
	add_building = no_harbor_2
	add_building = no_harbor_3
	add_building = no_harbor_4
	add_building = no_harbor_5
	add_building = no_harbor_6
	add_building = no_harbor_7
	add_building = no_harbor_8
	add_building = no_fishing_village_1
	add_building = no_fishing_village_2
	add_building = no_fishing_village_3
	add_building = no_fishing_village_4
	add_building = no_fishing_village_5
	add_building = no_fishing_village_6
	add_building = no_fishing_village_7
	add_building = no_fishing_village_8
	add_building = no_composite_bow_crafter_1
	add_building = no_composite_bow_crafter_2
	add_building = no_composite_bow_crafter_3
	add_building = no_composite_bow_crafter_4
	add_building = no_composite_bow_crafter_5
	add_building = no_composite_bow_crafter_6
	add_building = no_composite_bow_crafter_7
	add_building = no_composite_bow_crafter_8
	add_building = no_lamellar_armor_crafter_1
	add_building = no_lamellar_armor_crafter_2
	add_building = no_lamellar_armor_crafter_3
	add_building = no_lamellar_armor_crafter_4
	add_building = no_lamellar_armor_crafter_5
	add_building = no_lamellar_armor_crafter_6
	add_building = no_lamellar_armor_crafter_7
	add_building = no_lamellar_armor_crafter_8
	add_building = no_minority_shrine_1
	add_building = no_minority_shrine_2
	add_building = no_minority_shrine_3
	add_building = no_minority_shrine_4
	add_building = no_minority_shrine_5
	add_building = no_minority_shrine_6
	add_building = no_minority_shrine_7
	add_building = no_minority_shrine_8
	add_building = no_gathering_hall_1
	add_building = no_gathering_hall_2
	add_building = no_gathering_hall_3
	add_building = no_gathering_hall_4
	add_building = no_gathering_hall_5
	add_building = no_gathering_hall_6
	add_building = no_gathering_hall_7
	add_building = no_gathering_hall_8
	add_building = no_minter_1
	add_building = no_minter_2
	add_building = no_minter_3
	add_building = no_minter_4
	add_building = no_minter_5
	add_building = no_minter_6
	add_building = no_minter_7
	add_building = no_minter_8
	add_building = no_camp_fortifications_1
	add_building = no_camp_fortifications_2
	add_building = no_camp_fortifications_3
	add_building = no_camp_fortifications_4
	add_building = no_camp_fortifications_5
	add_building = no_camp_fortifications_6
	add_building = no_camp_fortifications_7
	add_building = no_camp_fortifications_8
	add_building = no_camel_breeder_1
	add_building = no_camel_breeder_2
	add_building = no_camel_breeder_3
	add_building = no_camel_breeder_4
	add_building = no_camel_breeder_5
	add_building = no_camel_breeder_6
	add_building = no_camel_breeder_7
	add_building = no_camel_breeder_8
	add_building = no_elephant_camp_1
	add_building = no_elephant_camp_2
	add_building = no_elephant_camp_3
	add_building = no_elephant_camp_4
	add_building = no_elephant_camp_5
	add_building = no_elephant_camp_6
	add_building = no_elephant_camp_7
	add_building = no_elephant_camp_8
}
