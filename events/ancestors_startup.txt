# ACS.90041 - Ensure Unique characters
character_event = {
	id = ACS.90041
	is_triggered_only = yes
	hide_window = yes
	ai = no

    trigger = {
		OR = {
			multiplayer = no
			AND = {
				multiplayer = yes
				is_multiplayer_host_character = yes
			}
		}
	}

	immediate = {
		### Ensure only one Vee
		random_character = {
            limit = {            
                has_character_flag = is_vee
            }
            set_character_flag = dont_kill_at_purge
        }
        any_character = {
            limit = {
                has_character_flag = is_vee
                NOT = { has_character_flag = dont_kill_at_purge }
            }
			set_character_flag = dont_resucite
            death = { death_reason = death_poor_health }
        }
		### Ensure only one Khalga
		random_character = {
            limit = {            
                has_character_flag = is_khalga
            }
            set_character_flag = dont_kill_at_purge
        }
        any_character = {
            limit = {
                has_character_flag = is_khalga
                NOT = { has_character_flag = purge_dont_kill }
            }
			set_character_flag = dont_resucite
            death = { death_reason = death_poor_health }
        }
	}
}

# ACS.90043 - Ensure only one Khalga
character_event = {
	id = ACS.90043
	is_triggered_only = yes
	hide_window = yes
	ai = no

	trigger = {
		NOT = { has_global_flag = upd_0_6_0 }
	}

	immediate = {
		any_character = {
			limit = {
				trait = sharingan
			}
			add_trait = vee_blood
		}
		any_character = {
			limit = {
				trait = byakugan
			}
			add_trait = khalga_blood
		}
		set_global_flag = upd_0_6_0
	}
}
